# Overview

This repo hosts a collection of scripts for ACI as Code
(<https://netascode.cisco.com>). These scripts are designed for a single
multi-fabric repo, where fabric configurations are under `./fabrics/<fabric>`;
however, they could be adapted for other file layouts.

The scripts all take a single CLI parameter specifying the name of the fabric
(the name of the path under `./fabrics/`). Scripts are typically stored in a
`./scripts/` folder and executed from the repo root.

# Scripts

## `gen_imports.py`

Generates `import.tf` from the Terraform plan. In order to run this, we must
have a `plan.json` generated by `terraform show plan.tfplan -json > plan.json`.
To generate a `plan.tfplan`, run `terraform plan -out plan.tfplan`.

## `render_aci_fabrics.py`

Render Jinja2 templates for ACI fabric configurations. This renders any
templates in the `./templates` folder using the context from
`./fabrics/<fabric>/vars.yaml` and outputs the rendered files to
`./fabrics/<fabric>/data/<template_name>.rendered.nac.yaml`.

## `review.py`

Review parses the `plan.json` and provides a concise summary of changes. This
differs from the standard terraform plan and show as it clearly shows imports
and shows creates and changes in a more concise, human-readable format.
